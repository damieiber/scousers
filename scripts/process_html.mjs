import 'dotenv/config';

async function extractNewsDataFromHtml(html, apiKey) {
  const prompt = `
    Eres un experto en análisis de contenido web y estructuración de datos.
    Analiza el siguiente contenido HTML de una noticia y extrae la información en formato JSON.
    El JSON debe tener la siguiente estructura: { "title": "...", "summary": "...", "imageUrl": "...", "source": "..." }.

    - title: El título principal de la noticia.
    - summary: Un resumen de 2 o 3 frases del contenido principal.
    - imageUrl: La URL de la imagen principal del artículo. Debe ser una URL absoluta.
    - source: El nombre del medio o sitio web (ej: "Diario Olé", "TyC Sports").

    HTML:
    """
    ${html}
    """

    JSON:
  `;

  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      contents: [
        {
          parts: [
            {
              text: prompt,
            },
          ],
        },
      ],
    }),
  });

  if (!response.ok) {
    const errorData = await response.text();
    throw new Error(`Gemini API error: ${response.status} - ${errorData}`);
  }

  const data = await response.json();

  if (!data.candidates || data.candidates.length === 0) {
    throw new Error('No response from Gemini API');
  }

  const text = data.candidates[0].content.parts[0].text;
  const cleanedJsonString = text.replace(/```json|```/g, '').trim();
  return JSON.parse(cleanedJsonString);
}

async function run() {
  const apiKey = process.argv[2];
  if (!apiKey) {
    console.error('Please provide the API key as a command line argument.');
    return;
  }

  const htmlContents = [
    `
Últimas noticias de River Plate | TN  Temas de hoy:  Javier Milei  Triple crimen en Florencio Varela  Dólar hoy  Tensión económica  Secciones  EN VIVO  tn River Plate  Últimas noticias de River Plate  Gallardo comienza a pensar en el plantel del próximo año (Foto: EFE).  Ante las bajas, Gallardo analiza variantes para el equipo titular de River que enfrentará a Riestra  El Millonario jugará frente al Guapo mañana en el Monumental por el Torneo Clausura 2025. El DT meterá cambios tras la dura eliminación ante Palmeiras y con la Copa Argentina en el horizonte.  El verdugo de River en la Copa Libertadores reveló que estuvo cerca de ser refuerzo de  El verdugo de River en la Copa Libertadores reveló que estuvo cerca de ser refuerzo de Boca  El delantero argentino fue la figura de la serie y anotó dos goles en el partido de vuelta para condenar al Millonario.  La dura crítica del Pollo Vignolo al plantel de River: "Costó fortuna y es  La dura crítica del Pollo Vignolo al plantel de River: “Costó fortuna y es verde”  El periodista de ESPN fulminó a los dirigidos por Marcelo Gallardo tras la eliminación por Copa Libertadores.  River y Racing ya tienen fecha, horario y sede para el partido más esperado de  El esperado cruce entre River y Racing por la Copa Argentina ya tiene fecha, hora y estadio definidos  El choque definirá al último semifinalista del certamen y hay gran expectativa.  River suma otra eliminación ante un equipo brasileño. (Foto: EFE)  El maleficio que persigue a River en fases de eliminación de Copa Libertadores  El “Millonario” acumula una importante seguidilla de duelos perdidos ante equipos brasileños.  Gallardo comienza a pensar en el plantel del próximo año (Foto: EFE).  Las decisiones que deberá asumir Gallardo en el armado del plantel 2026 tras la eliminación de la Libertadores  El Millonario enfrenta la posibilidad de un éxodo a fin de año por vencimiento de contratos y ciclos cumplidos. Los efectos de una derrota que anticipó el final de la competencia internacional en el año.  La reacción de los hinchas de Boca en un partido de la LNB tras un gol  La reacción de los hinchas de Boca en un partido de la LNB tras un gol de Palmeiras a River en la Libertadores  La atención de la Bombonerita se desvió por unos minutos y los fanáticos festejaron el segundo tanto del Verdao ante el Millonario.  Palmeiras le ofrecerá un nuevo contrato a Abel Ferreira tras eliminar a River de la Copa  El premio que Palmeiras le dará a Abel Ferreira tras eliminar a River de la Copa Libertadores  El entrenador del conjunto paulista consiguió llegar a su quinta semifinal en el torneo sudamericano de clubes más importante, que ya ganó en dos oportunidades.  Un reconocido streamer de Boca desató un delirante festejo tras la eliminación de River de la  Un reconocido streamer de Boca desató un delirante festejo tras la eliminación de River de la Libertadores  Vestido con la camiseta del Palmeiras y con una imagen de la Bombonera de fondo, Davoo Xeneize bailó al ritmo de la música brasileña.  La jugada que motivó el enojo de todo River con el árbitro Andrés Matonte: ¿  La jugada que motivó el enojo de todo River con el árbitro Andrés Matonte: ¿hubo mano de Facundo Colidio?  Marcelo Gallardo se quejó de la actuación del uruguayo en la derrota del Millonario ante Palmeiras en Brasil.  Con goles de Vitor Roque y José López (2), Palmeiras le ganó a  River perdió 3-1 ante Palmeiras en Brasil y quedó eliminado de la Copa Libertadores en cuartos de final  El Millonario abrió el marcador con un tanto tempranero de Maxi Salas, no pudo sostener la ventaja y el Verdao dio vuelta el resultado en la segunda parte.  River quedó eliminado de la Copa Libertadores luego de perder con Palmeiras. (Foto:  Gallardo analizó el nivel de algunos jugadores de River tras la eliminación ante Palmeiras: “Necesitan crecer”  El entrenador reconoció las falencias que mostró su equipo y aseguró que todavía están “en reconstrucción”.  Palmeiras pasó a semifinales de la Copa Libertadores (Foto: EFE)  La burla de Palmeiras para River tras eliminarlo de la Copa Libertadores: “El mismo final”  El conjunto brasileño festejó en las redes sociales el pase a las semifinales.  El año de River: todos los torneos en los que quedó eliminado y los dos  El año de River: todos los torneos en los que quedó eliminado y los dos títulos que todavía puede ganar  El Millonario sufrió un duro golpe tras quedar fuera de la Copa Libertadores ante Palmeiras en los cuartos de final.  Marcelo Gallardo apuntó contra el árbitro tras la eliminación de River: “No supo manejar  Marcelo Gallardo apuntó contra el árbitro tras la eliminación de River: “No supo manejar el partido”  El entrenador se enojó por el resultado final, pero también criticó el rendimiento de Andrés Matonte.  Escándalo: los jugadores de River increparon al árbitro tras quedar eliminados de la Copa Libertadores  Escándalo: los jugadores de River increparon al árbitro tras quedar eliminados de la Copa Libertadores  El plantel del Millonario quedó muy enojado con la actuación de Andrés Matonte en el partido de vuelta ante Palmeiras.  El impactante corte que sufrió Enzo Pérez en el partido de River ante Palmeiras por la  El impactante corte que sufrió Enzo Pérez en el partido de River ante Palmeiras por la Copa Libertadores  El volante del Millonario derribó a un futbolista del Verdao, pero se fue directo al banco de suplentes para pedir asistencia médica.  El blooper del árbitro que hizo estallar a todo River: expulsó por error a Salas  El blooper del árbitro que hizo estallar a todo River: expulsó por error a Salas y tuvo que anular la tarjeta  Andrés Matonte fue protagonista de un insólito momento con el delantero del Millonario en el duelo ante Palmeiras por la Copa Libertadores.  Copa Libertadores: qué pasa si River gana, pierde o empata contra Palmeiras por los  Copa Libertadores: qué pasa si River gana, pierde o empata contra Palmeiras por los cuartos de final  El “Millonario” visitará al conjunto brasileño en busca de un lugar en las semifinales de la competencia internacional.  River visita a Palmeiras por el partido de vuelta de los cuartos de final de la  El mensaje del Diablito Echeverri en la previa al partido de River con Palmeiras por la Copa Libertadores  El actual futbolista del Bayer Leverkusen publicó una imagen en sus redes sociales antes del cruce copero del Millonario.  Cargar más notas  TN en vivo 24hsEN VIVO  Todas las últimas noticias en vivo y actualidad de hoy en TN.com.ar  Todas las últimas noticias en vivo y actualidad de hoy en TN.com.ar  © 1996 - 2025, Artear  Seguinos en las redes  Descargate la app de TN  google-play app-store  Últimas noticias  Así es la cárcel de máxima seguridad donde fue trasladado el quinto detenido por el triple femicidio en Varela  Mitos y verdades sobre la seguridad de los iPhone: ¿son invulnerables los smartphones de Apple?  Qué dijo Valentino, el hijo mayor de Wanda Nara y Maxi López, después de su cirugía  Ante las bajas, Gallardo analiza variantes para el equipo titular de River que enfrentará a Riestra  Secciones  Últimas noticias  Elecciones 2025  Dólar  Deportivo  Show  Economía  Internacional  Opinión  Policiales  Política  Sociedad  Juegos  Sitios amigos  Grupo Clarín  Artear  eltrece  Ciudad Magazine  El Doce  Cucinare  Canal (á)  Clarín  Olé  Mitre  La 100  Cienradios  TyC Sports  La Voz  Vía País  Descargate la app de TN  google-play app-store  Seguinos en las redes  © 1996 - 2025, Artear  Mapa del sitio  Términos y Condiciones  Políticas de privacidad  Media Kit
`,
    `
Noticias de River Plate | Bolavip Argentina  Es tendencia:  Defensa – Boca River hoy Atlético 5-2 Real Madrid Furia de Mastantuono Cholo Simeone sobre Julián Flaco López Suspensión de FIFA a Machuca La IA predijo el resultado de Boca Nico Paz Mundial sub 20  logotipo del encabezado ARGENTINA  arg-flag  ARGENTINA  ULTIMAS NOTICIAS BOCA RIVER FUTBOL ARGENTINO APUESTAS MESSI LIBERTADORES SELECCIÓN ARGENTINA POLIDEPORTIVO ELIMINATORIAS COLAPINTO FORMULA 1 EUROPA FUTBOL INTERNACIONAL TENIS PREMIER LEAGUE  AGENDA DEPORTIVA  Es tendencia:  Defensa – Boca River hoy Atlético 5-2 Real Madrid Furia de Mastantuono Cholo Simeone sobre Julián Flaco López Suspensión de FIFA a Machuca La IA predijo el resultado de Boca Nico Paz Mundial sub 20  ULTIMAS NOTICIAS BOCA RIVER FUTBOL ARGENTINO APUESTAS  NOTICIAS PRONÓSTICOS GUÍAS CÓDIGOS PROMOCIONALES RESEÑAS APUESTA DEL DÍA  MESSI LIBERTADORES SELECCIÓN ARGENTINA POLIDEPORTIVO ELIMINATORIAS COLAPINTO FORMULA 1 EUROPA FUTBOL INTERNACIONAL TENIS PREMIER LEAGUE  footer logo  síguenos  Ediciones| ARGENTINA| BRASIL| CHILE| COLOMBIA| GLOBAL| MÉXICO| PERU| US ENGLISH|  QUIENES SOMOS| STAFF| CONTACTO| Escribe en Bolavip| RedGol| Futbolcentroamerica| APUESTAS|  Términos y Condiciones Políticas de Privacidad Política Editorial Ad Choices  Bolavip, al igual que Futbol Sites, es una compañía perteneciente a Better Collective. Todos los derechos reservados.  compliance-1  EL JUEGO COMPULSIVO ES PERJUDICIAL PARA VOS Y TU FAMILIA, Línea gratuita de orientación al jugador problemático: Buenos Aires Provincia 0800-444-4000, Buenos Aires Ciudad 0800-666-6006  Better Collective Logo  arg-flag  ARGENTINA  bra-flag  BRASIL  chi-flag  CHILE  col-flag  COLOMBIA  reg-flag  GLOBAL  mex-flag  MEXICO  mex-flag  PERU  usa-flag  US ENGLISH  RIVER PLATE  RIVER PLATE  NOTICIAS PARTIDOS POSICIONES  últimos partidos  River Plate  G  G  P  P  G  P  estadísticas completas  agenda  Liga Profesional Argentina  28/09  18:00  River Plate River Plate  Deportivo Riestra Deportivo Riestra  Copa Argentina  02/10  18:00  Racing Club Racing Club  River Plate River Plate  Liga Profesional Argentina  05/10  21:15  Rosario Central Rosario Central  River Plate River Plate  River hoy: las bajas que tiene Gallardo, Subiabre renovará su contrato y la formación  River Plate  River hoy: las bajas que tiene Gallardo, Subiabre renovará su contrato y la formación vs. Riestra  Gallardo mete mano en el once de River para enfrentar a Deportivo Riestra por el Torneo  River Plate  Gallardo mete mano en el once de River para enfrentar a Deportivo Riestra por el Torneo Clausura 2025  Diego Latorre y un crudo análisis del presente de River con críticas a Marcelo Gallardo:  River Plate  Diego Latorre y un crudo análisis del presente de River con críticas a Marcelo Gallardo: “No le pudo dar identidad”  Más Competencias  Mundial Qatar 2022  Mundial Qatar 2022  Liga Profesional Argentina  PRÓXIMOS PARTIDOS  Domingo 28/09  River Plate River Plate  18:00  Deportivo Riestra Deportivo Riestra  Domingo 05/10  Rosario Central Rosario Central  21:15  River Plate River Plate  Domingo 12/10  River Plate River Plate  19:15  Sarmiento Sarmiento  Calendario Completo  Posiciones  Grupo B  ​  PEQUIPOPTSPJG-E-P  1  Rosario Rosario  351610-5-1  2  River River  31168-7-1  3  Independiente Independiente  29168-5-3  4  San Lorenzo San Lorenzo  27167-6-3  5  Riestra Riestra  24165-9-2  6  Platense Platense  23166-5-5  7  Lanús Lanús  20164-8-4  8  Instituto Instituto  18165-3-8  9  Godoy Cruz Godoy Cruz  17163-8-5  10  Atl. Tucumán Atl. Tucumán  16165-1-10  Posiciones completas  Goleadores  River Plate M. Borja  6  River Plate F. Colidio  6  River Plate S. Driussi  5  River Plate G. Galoppo  4  River Plate F. Mastantuono  4  River Plate I. Fernández  3  River Plate S. Lencina  3  River Plate G. Montiel  2  River Plate M. Salas  2  River Plate M. Acuña  1  Estadísticas Completas  Copa Argentina  PRÓXIMOS PARTIDOS  Jueves 02/10  Racing Club Racing Club  18:00  River Plate River Plate  Calendario Completo  Goleadores  River Plate G. Montiel  2  River Plate G. Galoppo  1  River Plate L. González Pírez  1  River Plate F. Mastantuono  1  Estadísticas Completas  Copa Libertadores  PRÓXIMOS PARTIDOS  Calendario Completo  Posiciones  Grupo B  ​  PEQUIPOPTSPJG-E-P  1  River River  1263-3-0  2  Universitario Universitario  862-2-2  3  Ind. del Valle Ind. del Valle  862-2-2  4  Barcelona Barcelona  461-1-4  Posiciones completas  Goleadores  River Plate S. Driussi  4  River Plate F. Colidio  2  River Plate F. Mastantuono  2  River Plate M. Borja  1  River Plate P. Díaz  1  River Plate G. Galoppo  1  River Plate M. Lanzini  1  River Plate L. Martínez Quarta  1  River Plate M. Meza  1  River Plate M. Salas  1  Estadísticas Completas  Copa Sudamericana  PRÓXIMOS PARTIDOS  Calendario Completo  Champions League  PRÓXIMOS PARTIDOS  Calendario Completo  Posiciones  PEQUIPOPTSPJG-E-P  1  Liverpool Liverpool  2187-0-1  2  Barcelona Barcelona  1986-1-1  3  Arsenal Arsenal  1986-1-1  4  Inter Inter  1986-1-1  5  Atlético Atlético  1886-0-2  6  Leverkusen Leverkusen  1685-1-2  7  Lille Lille  1685-1-2  8  Aston Villa Aston Villa  1685-1-2  9  Atalanta Atalanta  1584-3-1  10  Dortmund Dortmund  1585-0-3  Posiciones completas  Eurocopa  PRÓXIMOS PARTIDOS  Calendario Completo  Posiciones  PEQUIPOPTSPJG-E-P  1  Alemania Alemania  732-1-0  2  Suiza Suiza  531-2-0  3  Hungria Hungria  331-0-2  4  Escocia Escocia  130-1-2  Posiciones completas  Copa América  PRÓXIMOS PARTIDOS  Calendario Completo  Posiciones  PEQUIPOPTSPJG-E-P  1  Argentina Argentina  933-0-0  2  Canada Canada  431-1-1  3  Chile Chile  230-2-1  4  Peru Peru  130-1-2  Posiciones completas  Copa Sudamericana  PRÓXIMOS PARTIDOS  Calendario Completo  PRÓXIMOS PARTIDOS  Domingo 28/09  River Plate River Plate  18:00  Deportivo Riestra Deportivo Riestra  Domingo 05/10  Rosario Central Rosario Central  21:15  River Plate River Plate  Domingo 12/10  River Plate River Plate  19:15  Sarmiento Sarmiento  Calendario Completo  Posiciones  Grupo B  ​  PEQUIPOPTSPJG-E-P  1  Rosario Rosario  351610-5-1  2  River River  31168-7-1  3  Independiente Independiente  29168-5-3  4  San Lorenzo San Lorenzo  27167-6-3  5  Riestra Riestra  24165-9-2  6  Platense Platense  23166-5-5  7  Lanús Lanús  20164-8-4  8  Instituto Instituto  18165-3-8  9  Godoy Cruz Godoy Cruz  17163-8-5  10  Atl. Tucumán Atl. Tucumán  16165-1-10  Posiciones completas  Goleadores  River Plate M. Borja  6  River Plate F. Colidio  6  River Plate S. Driussi  5  River Plate G. Galoppo  4  River Plate F. Mastantuono  4  River Plate I. Fernández  3  River Plate S. Lencina  3  River Plate G. Montiel  2  River Plate M. Salas  2  River Plate M. Acuña  1  Estadísticas Completas  Así es el presente de los jugadores que llegaron a River en el mercado de pases  River Plate  Así es el presente de los jugadores que llegaron a River en el mercado de pases más decepcionante de los últimos años  A mediados de 2024, antes del regreso de Gallardo, el Millonario hizo incorporaciones insólitas para pelear por la Libertadores.  Se acabó la novela: Ian Subiabre renovará con River y jugará el Mundial sub 20  River Plate  Se acabó la novela: Ian Subiabre renovará con River y jugará el Mundial sub 20  Todos los detalles de la renovación contractual más tensa del último año en el cuadro millonario.  River hoy: Enzo Pérez no jugará vs. Riestra y la formación que analiza Gallardo  River Plate  River hoy: Enzo Pérez no jugará vs. Riestra y la formación que analiza Gallardo  Todas las novedades del Millonario de este viernes 26 de septiembre, donde el plantel ya piensa en Deportivo Riestra.  El Flaco López puso fin a la novela y reveló en qué club estuvo más cerca  Actualidad  El Flaco López puso fin a la novela y reveló en qué club estuvo más cerca entre Boca y River: “Llegué a pensarlo”  El goleador de Palmeiras se refirió a las chances que tuvo de vestir la camiseta del Xeneize y también la del Millonario.  Enzo Pérez no jugará en River vs. Riestra: el motivo  River Plate  Enzo Pérez no jugará en River vs. Riestra: el motivo  Marcelo Gallardo descartó por completo a uno de los habituales titulares del Millonario.  3 IA se pusieron de acuerdo y le recomendaron a River 5 refuerzos para 2026:  River Plate  3 IA se pusieron de acuerdo y le recomendaron a River 5 refuerzos para 2026: hay otro campeón del mundo y un ex Boca  Dos defensores centrales, un mediocampista central, un volante de juego y un nueve de área fueron los refuerzos recomendados para el Muñeco.  El día que Francescoli reveló que River quiso al Flaco López: "Terminó en Palmeiras  River Plate  El día que Francescoli reveló que River quiso al Flaco López: "Terminó en Palmeiras"  A comienzos de 2024, el director deportivo del conjunto Millonario supo brindar precisiones sobre el fallido desembarco del delantero.  El karma de River con los volantes  River Plate  El karma de River con los volantes  Desde 2023 el Millonario no logra dar en la tecla con el volante central titular.  River hoy: fecha confirmada vs. Racing por Copa Argentina, lesión de Portillo,  River Plate  River hoy: fecha confirmada vs. Racing por Copa Argentina, lesión de Portillo, los 10 que podrían irse y el reclamo de los hinchas  Todas las novedades del Millonario de este jueves 25 de septiembre, el día posterior a quedar eliminado de la Copa Libertadores.  Se conoció el grado de la lesión de Juan Carlos Portillo  River Plate  Se conoció el grado de la lesión de Juan Carlos Portillo  El mediocampista apenas pudo disputar los primeros 25 minutos del encuentro frente a Palmeiras antes de ser reemplazado por Enzo Pérez.  Los 10 jugadores que pueden irse de River luego de un nuevo fracaso en la Copa  River Plate  Los 10 jugadores que pueden irse de River luego de un nuevo fracaso en la Copa Libertadores  Entre contratos que se vencen, ciclos cumplidos y posibles ventas, el Millonario puede transitar otro éxodo en el próximo mercado de pases.  Los hinchas de River le apuntaron a los jugadores en Brasil: "A ver si  River Plate  Los hinchas de River le apuntaron a los jugadores en Brasil: "A ver si nos entendemos..."  Más de dos mil fanáticos del Millonario dijeron presente en el Allianz Parque para alentar al equipo de Gallardo ante Palmeiras.  1 236667  TOP BOLAVIP  1  "River pierde la serie en el Monumental, pero el principal responsable de la eliminación  Toti Pasman  "River pierde la serie en el Monumental, pero el principal responsable de la eliminación con...  2  A qué hora juega la Selección Argentina ante Cuba por el Mundial sub 20  Mundial sub 20  A qué hora juega la Selección Argentina ante Cuba por el Mundial sub 20  3  A qué hora corre Franco Colapinto en el Gran Premio de Singapur de la Fórmula 1  Fórmula 1  A qué hora corre Franco Colapinto en el Gran Premio de Singapur de la Fórmula 1  4  Escándalo: FIFA suspendió a un titular de Vélez y a dos argentinos más por falsificación de  Vélez  Escándalo: FIFA suspendió a un titular de Vélez y a dos argentinos más por falsificación de documentos  5  Atlético de Madrid vs. Real Madrid por LaLiga: formaciones, dónde ver y ¿  LaLiga  Atlético de Madrid vs. Real Madrid por LaLiga: formaciones, dónde ver y ¿juegan Julián Álvarez y...  Recibe las últimas noticias en tu casilla de E-mail  Registrarse implica aceptar los Términos y Condiciones  Registrarse implica aceptar los Términos y Condiciones  footer logo  síguenos  Ediciones| ARGENTINA| BRASIL| CHILE| COLOMBIA| GLOBAL| MÉXICO| PERU| US ENGLISH|  QUIENES SOMOS| STAFF| CONTACTO| Escribe en Bolavip| RedGol| Futbolcentroamerica| APUESTAS|  Términos y Condiciones Políticas de Privacidad Política Editorial Ad Choices  Bolavip, al igual que Futbol Sites, es una compañía perteneciente a Better Collective. Todos los derechos reservados.  compliance-1  EL JUEGO COMPULSIVO ES PERJUDICIAL PARA VOS Y TU FAMILIA, Línea gratuita de orientación al jugador problemático: Buenos Aires Provincia 0800-444-4000, Buenos Aires Ciudad 0800-666-6006  Better Collective Logo  "River pierde la serie en el Monumental, pero el principal responsable de la eliminación con...  A qué hora juega la Selección Argentina ante Cuba por el Mundial sub 20  A qué hora corre Franco Colapinto en el Gran Premio de Singapur de la Fórmula 1  Escándalo: FIFA suspendió a un titular de Vélez y a dos argentinos más por falsificación de documentos  Atlético de Madrid vs. Real Madrid por LaLiga: formaciones, dónde ver y ¿juegan Julián Álvarez y...
`
  ];

  const allNews = [];
  for (const html of htmlContents) {
    try {
      const newsData = await extractNewsDataFromHtml(html, apiKey);
      allNews.push(newsData);
    } catch (error) {
      console.error('Error processing HTML:', error);
    }
  }
}

run();