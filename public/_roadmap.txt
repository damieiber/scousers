Fase 2 ‚Äì Funcionalidades Premium y Expansi√≥n multi-equipo (IA Progressiva)
üí∞ Monetizaci√≥n: Todas las funcionalidades en Fase 2 est√°n disponibles s√≥lo con suscripci√≥n activa. El MVP seguir√° siendo gratuito con contenido b√°sico de Epic 1.

Historia F2-1: Autenticaci√≥n y Perfil de Usuario
Objetivo:
Permitir que el usuario se registre/inicie sesi√≥n, guarde y recupere sus preferencias: equipo principal, equipos secundarios, configuraci√≥n premium y personalizaci√≥n expl√≠cita.
Debe integrarse con Supabase Auth para almacenamiento seguro y escalable.
Disponible s√≥lo con suscripci√≥n activa para guardar y aplicar configuraciones Premium.

Pasos T√©cnicos:
Backend ‚Äì Supabase Auth:
Configurar autenticaci√≥n por email/contrase√±a.
Crear tabla user_profiles vinculada por auth.user_id:
primary_team_id (FK a teams)
secondary_team_ids (array de FK)
subscription_status
preferences (JSON)
Frontend:
Pantalla de login/registro.
Validaci√≥n en tiempo real de email y contrase√±as.
Form para configurar equipo principal y secundarios (m√°ximo X secundarios).
Persistencia:
Guardar en Supabase al confirmar selecci√≥n.
Recuperar datos en login para aplicar configuraci√≥n autom√°tica.

UX/UI Guidelines:
Formularios simples, mensajes de error inline.
Selecci√≥n de equipos con logos y nombres visibles.
Indicar claramente qu√© equipo es principal y cuales son secundarios.

Criterios de Aceptaci√≥n:
Usuario puede crear cuenta y loguearse correctamente.
Perfil guarda correctamente equipo principal y secundarios.
La configuraci√≥n se aplica autom√°ticamente despu√©s de login.
No se permite tener ‚Äúsin equipo principal‚Äù.

QA Test Cases:
Registro con email v√°lido, login exitoso.
Intentar login con credenciales incorrectas ‚Üí error mostrado.
Guardar perfil y hacer logout/login ‚Üí configuraci√≥n persiste.
Intentar borrar equipo principal ‚Üí se rechaza.


Historia F2-2: Modo Rival Autom√°tico con IA
Objetivo:
Mostrar feed especial del equipo principal con noticias de sus rivales predeterminados, priorizando autom√°ticamente noticias negativas.
La lista de rivales es inicial manualmente y luego gestionada y ajustada por IA.
Disponible s√≥lo con suscripci√≥n activa.

Pasos T√©cnicos:
DB:
Tabla rivalries: team_id, rival_team_id, rank.
Insertar dataset inicial.
IA Rival Manager:
Agente IA que, cada X d√≠as, analiza resultados y cobertura medi√°tica para confirmar relevancia de rivalidad.
Ajusta lista en rivalries.
Clasificaci√≥n Noticias:
Funci√≥n IA classifyRivalNews(text, rivalName):


IA extractKeyPoints() del texto.
Clasifica la noticia como NEGATIVA, NEUTRA o POSITIVA para [rivalName].
Validar con segundo agente que la clasificaci√≥n usa hechos reales.
Guardar en articles.rival_sentiment.
Feed API:
/api/feed?mode=rivals: filtrado solo rivales del equipo principal.
Ordenado: NEGATIVA ‚Üí NEUTRA ‚Üí POSITIVA ‚Üí fecha.

UX/UI Guidelines:
Toggle ‚ÄúModo Rival‚Äù en barra superior.
Tarjetas muestran escudo rival + distintivo visual seg√∫n sentimiento:
NEGATIVA: borde rojo oscuro.
NEUTRA: gris.
POSITIVA: verde.

Criterios de Aceptaci√≥n:
Rivales detectados autom√°ticamente seg√∫n equipo principal.
Feed muestra solo rivales.
Noticias ordenadas por sentimiento (NEGATIVA > NEUTRA > POSITIVA).
Validaci√≥n aprobada antes de mostrar.
UI refleja rivales y sentimiento con distintivos claros.

QA Test Cases:
Seleccionar River Plate ‚Üí ver Boca, Racing, Independiente.
Inyectar noticia negativa ‚Üí aparece primero.
Toggle off ‚Üí feed normal.
IA ajusta rivales tras cambio en contexto deportivo.


Historia F2-3: Personalizaci√≥n Visual Autom√°tica con IA
Objetivo:
Configurar autom√°ticamente la apariencia de la app (colores oficiales, escudo actual, banners, camisetas hist√≥ricas) seg√∫n el equipo principal, gracias a un agente IA que obtiene y mantiene esos assets.
Disponible s√≥lo con suscripci√≥n activa.

Pasos T√©cnicos:
DB:
Tabla teams_assets: team_id, primary_color, secondary_color, logo_url, banner_url, jersey_image_url.
IA Asset Manager:
Scraper de fuentes oficiales y de prensa para obtener assets actualizados.
Clasificaci√≥n y validaci√≥n de assets.
Actualizaci√≥n autom√°tica de teams_assets.
Frontend:
Context React aplica tema y assets en cada render basado en primary_team_id.

UX/UI Guidelines:
Respetar identidad visual oficial.
Evitar problemas de contraste.
Assets adaptados para mobile y desktop.

Criterios de Aceptaci√≥n:
Cambio de equipo principal actualiza de forma autom√°tica colores/banners/camisetas.
Assets cargan sin distorsi√≥n.
Nuevos assets detectados por IA y aplicados.

QA Test Cases:
Cambiar equipo principal ‚Üí UI actualiza assets.
Asset da√±ado o con error ‚Üí IA repone versi√≥n funcional.
Verificar contraste en colores oscuros/claro.


Historia F2-4: Motor de Personalizaci√≥n Expl√≠cita Premium
Objetivo:
Ajustar el orden/prioridad del feed seg√∫n preferencias expl√≠citas del usuario sobre tipos de noticias.
IA clasifica y etiqueta las noticias.
Disponible s√≥lo con suscripci√≥n activa.

Pasos T√©cnicos:
DB:
Tabla user_preferences: user_id, category_id, weight.
IA Categorization:
Funci√≥n categorizeNews(text) asigna categor√≠a: mercado de pases, t√°cticas, juveniles, etc.
Feed Ponderado:
Query ordena noticias por peso categor√≠a + fecha.

UX/UI Guidelines:
Selector simple con checklist y sliders de prioridad.
Mostrar categor√≠a de noticia en tarjeta.

Criterios de Aceptaci√≥n:
Feed reacciona din√°micamente a cambios en preferencias.
Categor√≠as correctas en base a contenido.
UI muestra categor√≠a de cada noticia.

QA Test Cases:
Seleccionar "Mercado de pases" como prioridad alta ‚Üí feed muestra m√°s de esa categor√≠a.
Cambiar slider ‚Üí feed reordena inmediatamente.
Validar IA asigna categor√≠a correcta a muestra de art√≠culos.


Historia F2-5: Multi-equipo Premium (Principal + Secundarios)
Objetivo:
Permitir seguir un equipo principal y varios secundarios en el feed. Rivales autom√°ticos y assets tambi√©n gestionados por IA.
Disponible s√≥lo con suscripci√≥n activa.

Pasos T√©cnicos:
DB:
primary_team_id y secondary_team_ids en user_profiles.
Feed Multi:
Endpoint combina noticias de todos los equipos seleccionados.
Etiquetas por equipo.
IA Assets/Rivales:
IA mantiene lista rivales y assets para secundarios.

UX/UI Guidelines:
Escudo y nombre del equipo visibles en cada tarjeta.
Color/acento seg√∫n equipo.
Filtro r√°pido por equipo activo.

Criterios de Aceptaci√≥n:
Siempre hay un equipo principal definido.
Noticias etiquetadas correctamente por equipo.
Filtro por equipo funciona correctamente.

QA Test Cases:
River principal + Madrid/Boca secundarios ‚Üí feed mixto etiquetado.
Filtrar por Boca ‚Üí solo noticias Boca.
IA actualiza rivales y assets secundarios semanalmente.


Historia F2-6: Engagement Diario IA
Objetivo:
Automatizar completamente el contenido diario (efem√©rides, foto del d√≠a) con IA para todos los equipos configurados por el usuario.
Disponible s√≥lo con suscripci√≥n activa.

Pasos T√©cnicos:
IA Content Agent:
Buscar eventos hist√≥ricos relevantes seg√∫n fecha y equipo.
Ejecutar extractKeyPoints() para efem√©ride.
Generar texto contextual desde puntos clave.
Buscar y seleccionar foto actual en redes oficiales/prensa.
Validar con segundo agente relevancia y formato contra fuente original antes de guardar.
DB:
Tabla daily_content: team_id, date, type (efemeride/photo), content, image_url.
Cron Diario:
Ejecuta IA agent y pobla daily_content.

UX/UI Guidelines:
Tarjeta efem√©ride con look vintage.
Tarjeta foto con imagen cuadrada y link a fuente original.

Criterios de Aceptaci√≥n:
IA genera efem√©ride y foto sin intervenci√≥n humana.
Contenido relevante y bien formateado.
Tarjetas visibles y clicables en feed.

QA Test Cases:
Fecha con evento ‚Üí IA lo detecta y muestra.
No hay foto ‚Üí tarjeta no mostrada.
Foto clic ‚Üí abre fuente original.

